<UserControl x:Class="Pip.UI.Components.Auctions.AuctionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
             xmlns:auctions="clr-namespace:Pip.UI.Components.Auctions"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:attachedProperties="clr-namespace:Pip.UI.AttachedProperties"
             xmlns:model="clr-namespace:Pip.Model;assembly=Pip.Model"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type={x:Type auctions:AuctionsViewModel}}"
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <Style TargetType="{x:Type dxg:GridControl}">
            <Setter Property="AutoExpandAllGroups" Value="True" />
            <Setter Property="ShowBorder" Value="False" />
            <Setter Property="SelectionMode" Value="Row" />
            <Setter Property="View">
                <Setter.Value>
                    <dxmvvm:ValueFactory>
                        <DataTemplate>
                            <dxg:TableView
                                AllowBestFit="True"
                                AllowGrouping="True"
                                AllowScrollAnimation="True"
                                AutoWidth="True"
                                AllowCellMerge="True"
                                NavigationStyle="Row"
                                ShowGroupedColumns="False">
                                <dxg:TableView.RowCellMenuCustomizations>
                                    <dxb:BarButtonItem Content="Save to Investments...">
                                        <dxmvvm:Interaction.Behaviors>
                                            <dxmvvm:ConfirmationBehavior
                                                Command="{Binding Path=(attachedProperties:GridControlProperties.RowCellMenuCommand), RelativeSource={RelativeSource AncestorType={x:Type dxg:GridControl}}}"
                                                EnableConfirmationMessage="True"
                                                MessageIcon="Exclamation"
                                                MessageButton="OKCancel"
                                                MessageText="Confirm save?" />
                                        </dxmvvm:Interaction.Behaviors>
                                    </dxb:BarButtonItem>
                                </dxg:TableView.RowCellMenuCustomizations>
                            </dxg:TableView>
                        </DataTemplate>
                    </dxmvvm:ValueFactory>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <dxdo:DockLayoutManager>
        <dxdo:LayoutGroup Orientation="Vertical" Loaded="{DXEvent Handler='LoadAsync()'}">
            <dxdo:DocumentGroup Caption="Auctions"
                                ShowCaption="True"
                                SelectedTabIndex="0">
                <dxdo:DocumentPanel Caption="Recent" x:Name="RecentTab">
                    <dxg:GridControl
                        ShowBorder="False"
                        ItemsSource="{Binding TreasuriesRecent}"
                        SelectedItem="{Binding SelectedTreasuryRecent, Mode=TwoWay}"
                        attachedProperties:GridControlProperties.RowCellMenuCommand="{Binding SaveRecentToInvestmentsCommand}">
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.Cusip)}"
                                Header="CUSIP"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.IssueDate)}"
                                Header="Issue Date"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.MaturityDate), FallbackValue=''}"
                                Header="Maturity Date"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.SecurityTerm)}"
                                Header="Term"
                                SortFieldName="TermSpan"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.Type)}"
                                GroupIndex="0"
                                Header="Type"
                                ReadOnly="True" />
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </dxdo:DocumentPanel>

                <dxdo:DocumentPanel Caption="Upcoming" x:Name="UpcomingTab">
                    <dxg:GridControl
                        ShowBorder="False"
                        ItemsSource="{Binding TreasuriesUpcoming}"
                        SelectedItem="{Binding SelectedTreasuryUpcoming}"
                        attachedProperties:GridControlProperties.RowCellMenuCommand="{Binding SaveUpcomingtToInvestmentsCommand}">
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.Cusip)}"
                                Header="CUSIP"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.IssueDate)}"
                                Header="Issue Date"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.MaturityDate), FallbackValue=''}"
                                Header="Maturity Date"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.SecurityTerm)}"
                                Header="Term"
                                SortFieldName="TermSpan"
                                ReadOnly="True" />
                            <dxg:GridColumn
                                Binding="{Binding Path=(model:Treasury.Type)}"
                                GroupIndex="0"
                                Header="Type"
                                ReadOnly="True" />
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </dxdo:DocumentPanel>
            </dxdo:DocumentGroup>
        </dxdo:LayoutGroup>
    </dxdo:DockLayoutManager>
</UserControl>