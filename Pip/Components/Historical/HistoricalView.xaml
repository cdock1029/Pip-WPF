<UserControl x:Class="Pip.UI.Components.Historical.HistoricalView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Pip.UI.Components.Historical"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:model="clr-namespace:Pip.Model;assembly=Pip.Model"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance Type={x:Type local:HistoricalViewModel}}"
             Loaded="{DXEvent Handler='Load()'}">

    <dxdo:DockLayoutManager>
        <dxdo:LayoutGroup Orientation="Vertical">
            <dxdo:DocumentGroup SelectedTabIndex="0" ShowDropDownButton="False">
                <dxdo:DocumentPanel Caption="Historical" ShowCloseButton="False">
                    <dx:LoadingDecorator IsSplashScreenShown="{Binding IsLoading}">
                        <dxg:GridControl
                            ShowBorder="False"
                            ItemsSource="{Binding Treasuries}">
                            <dxg:GridControl.View>
                                <dxg:TableView
                                    AllowBestFit="True"
                                    AllowGrouping="True"
                                    AllowScrollAnimation="False"
                                    RowAnimationKind="None"
                                    AutoWidth="True"
                                    AllowCellMerge="False"
                                    NavigationStyle="Row"
                                    UseEvenRowBackground="True"
                                    ShowGroupedColumns="False"
                                    HeaderHorizontalAlignment="Center">
                                    <!--<dxg:TableView.RowCellMenuCustomizations>
                        <dxb:BarButtonItem Content="Copy CUSIP"
                                           Glyph="{dx:DXImage 'SvgImages/Outlook Inspired/Copy.svg'}"
                                           CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=dxg:GridControl}, Path=SelectedItem.(model:Treasury.Cusip)}"
                                           Command="ApplicationCommands.Copy" />
                        <dxb:BarItemLinkSeparator />
                        <dxb:BarButtonItem Content="Save to Investments..."
                                           Command="{Binding Path=(attachedProperties:GridControlProperties.RowCellMenuCommand), RelativeSource={RelativeSource AncestorType={x:Type dxg:GridControl}}}"
                                           Glyph="{dx:DXImage 'SvgImages/Business Objects/BO_Opportunity.svg'}" />
                    </dxg:TableView.RowCellMenuCustomizations>-->
                                    <dxg:TableView.Header>
                                        <StackPanel>
                                            <dxe:ComboBoxEdit
                                                x:Name="YearComboBox"
                                                Margin="0,10, 0, 0"
                                                ItemsSource="{Binding Years}"
                                                SelectedItem="{Binding SelectedYear}"
                                                DisplayMember="Value"
                                                IsTextEditable="False"
                                                NullText="Choose year"
                                                Width="200">
                                                <dxmvvm:Interaction.Behaviors>
                                                    <dxmvvm:EventToCommand EventName="SelectedIndexChanged"
                                                                           Command="{Binding HandleYearChangedCommand}" />
                                                </dxmvvm:Interaction.Behaviors>
                                            </dxe:ComboBoxEdit>
                                        </StackPanel>
                                    </dxg:TableView.Header>
                                </dxg:TableView>
                            </dxg:GridControl.View>

                            <dxg:GridControl.Columns>
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.Cusip)}"
                                    Header="CUSIP"
                                    ReadOnly="True" />
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.SecurityTerm)}"
                                    Header="Term"
                                    SortFieldName="TermSpan"
                                    ReadOnly="True" />
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.AuctionDate)}"
                                    Header="Auction Date"
                                    ReadOnly="True" />
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.IssueDate)}"
                                    Header="Issue Date"
                                    ReadOnly="True" />
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.MaturityDate), FallbackValue=''}"
                                    Header="Maturity Date"
                                    ReadOnly="True" />
                                <dxg:GridColumn
                                    Binding="{Binding Path=(model:Treasury.Type)}"
                                    GroupIndex="0"
                                    Header="Type"
                                    ReadOnly="True" />
                            </dxg:GridControl.Columns>
                        </dxg:GridControl>

                    </dx:LoadingDecorator>
                </dxdo:DocumentPanel>
            </dxdo:DocumentGroup>
        </dxdo:LayoutGroup>
    </dxdo:DockLayoutManager>
</UserControl>