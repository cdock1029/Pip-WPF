@using Syncfusion.Blazor.Data
<SfGrid TValue="Investment"
        Height="100%"
        RowHeight="32"
        Toolbar="_toolbarActions"
        AllowPaging="false"
        AllowGrouping="true"
        AllowSorting="true">
    <GridGroupSettings Columns="[nameof(Investment.Type)]"/>

    <GridEvents RowSelected="HandleRowSelected" RowDeselected="HandleRowDeselected" TValue="Investment"/>

    <GridEditSettings AllowEditing="_isRowSelected" AllowDeleting="_isRowSelected" Mode="EditMode.Normal"/>

    <SfDataManager Url="/api/investments" UpdateUrl="/api/investments/update" RemoveUrl="/api/investments/delete" Adaptor="Adaptors.UrlAdaptor"></SfDataManager>
    <GridColumns>
        <GridColumn Field="@nameof(Investment.Id)" HeaderText="ID" IsPrimaryKey="true"/>
        <GridColumn Field="@nameof(Investment.Cusip)" HeaderText="CUSIP" AllowEditing="false"/>
        <GridColumn Field="@nameof(Investment.Par)" TextAlign="TextAlign.Right" Format="C2" AllowEditing="true"/>
        <GridColumn Field="@nameof(Investment.Type)" AllowEditing="false"/>
        <GridColumn Field="@nameof(Investment.IssueDate)" HeaderText="Issue Date" Format="@Statics.DateFormatString" AllowEditing="false"/>
        <GridColumn Field="@nameof(Investment.MaturityDate)" HeaderText="Maturity Date" Format="@Statics.DateFormatString" AllowEditing="false"/>
        <GridColumn Field="@nameof(Investment.SecurityTerm)" HeaderText="Term" AllowEditing="false"/>
    </GridColumns>
</SfGrid>

@code {

    readonly List<string> _toolbarActions = ["Edit", "Delete", "Update", "Cancel"];

    bool _isRowSelected;

    private void HandleRowSelected(RowSelectEventArgs<Investment> args)
    {
        _isRowSelected = true;
    }


    private void HandleRowDeselected(RowDeselectEventArgs<Investment> args)
    {
        _isRowSelected = false;
    }

}